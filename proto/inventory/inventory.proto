syntax = "proto3";
package inventory;
option go_package = "github.com/komadiina/spelltext/proto/inventory;inventory";

import "repo/repo.proto";
import "health/health.proto";

message InventoryBalanceRequest {
  string username = 1;
  string character = 2;
}

message InventoryBalanceResponse {
  uint64 gold = 1;
  uint64 tokens = 2;
}

message SellItemRequest {
  uint64 character_id = 1;
  repo.ItemInstance item_instance = 2;
}

message SellItemResponse {
  bool success = 1;
  string message = 2;
}

message AddItemsToBackpackRequest {
  uint64 character_id = 1;
  repeated uint64 item_instance_ids = 2;
}

message AddItemsToBackpackResponse {
  bool success = 1;
  string message = 2;
}

message ListBackpackItemsRequest {
  uint64 character_id = 1;
}

message ListBackpackItemsResponse {
  repeated repo.ItemInstance item_instances = 1;
}

service Inventory {
  rpc Check(health.HealthCheckRequest) returns (health.HealthCheckResponse);
  rpc GetBalance(InventoryBalanceRequest) returns (InventoryBalanceResponse);
  rpc SellItem(SellItemRequest) returns (SellItemResponse);
  rpc AddItemsToBackpack(AddItemsToBackpackRequest) returns (AddItemsToBackpackResponse);
  rpc ListBackpackItems(ListBackpackItemsRequest) returns (ListBackpackItemsResponse);
}